-- Mvemba military unit get forest and jungle free move instead of Ngao
-- 19/12/25 Delayed to classical era
DELETE FROM UnitAbilityModifiers WHERE ModifierId='NAGAO_FOREST_MOVEMENT';

INSERT INTO Modifiers(ModifierId, ModifierType, OwnerRequirementSetId) VALUES
    ('BBG_MILITARY_UNITS_IGNORE_WOODS', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 'BBG_PLAYER_IS_IN_ERA_CLASSICAL_REQUIREMENTS');
INSERT INTO ModifierArguments(ModifierId, Name, Value) VALUES
    ('BBG_MILITARY_UNITS_IGNORE_WOODS', 'AbilityType', 'BBG_IGNORE_WOODS_ABILITY');
INSERT INTO TraitModifiers(TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MILITARY_UNITS_IGNORE_WOODS');

INSERT INTO Tags (Tag, Vocabulary) VALUES
    ('CLASS_GREAT_GENERAL', 'ABILITY_CLASS');
INSERT INTO Types(Type, Kind) VALUES
    ('BBG_IGNORE_WOODS_ABILITY', 'KIND_ABILITY');
INSERT INTO TypeTags(Type, Tag) VALUES
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_RECON'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_MELEE'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_RANGED'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_ANTI_CAVALRY'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_LIGHT_CAVALRY'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_HEAVY_CAVALRY'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_SIEGE'),
    ('UNIT_GREAT_GENERAL', 'CLASS_GREAT_GENERAL'),
    ('BBG_IGNORE_WOODS_ABILITY', 'CLASS_GREAT_GENERAL');

INSERT INTO UnitAbilities(UnitAbilityType, Name, Description, Inactive, Permanent)  VALUES
    ('BBG_IGNORE_WOODS_ABILITY', 'LOC_BBG_IGNORE_WOODS_ABILITY_NAME', 'LOC_BBG_IGNORE_WOODS_ABILITY_DESCRIPTION', 1, 1);
INSERT INTO UnitAbilityModifiers(UnitAbilityType, ModifierId) VALUES
    ('BBG_IGNORE_WOODS_ABILITY', 'RANGER_IGNORE_FOREST_MOVEMENT_PENALTY');

-- 18/06/23 Moved relic bonus from kongo to Mvemba only
-- 05/04/25 Reverted
-- UPDATE TraitModifiers SET TraitType='TRAIT_LEADER_RELIGIOUS_CONVERT' WHERE ModifierId='TRAIT_GREAT_WORK_FAITH_RELIC';
-- UPDATE TraitModifiers SET TraitType='TRAIT_LEADER_RELIGIOUS_CONVERT' WHERE ModifierId='TRAIT_GREAT_WORK_FOOD_RELIC';
-- UPDATE TraitModifiers SET TraitType='TRAIT_LEADER_RELIGIOUS_CONVERT' WHERE ModifierId='TRAIT_GREAT_WORK_PRODUCTION_RELIC';
-- UPDATE TraitModifiers SET TraitType='TRAIT_LEADER_RELIGIOUS_CONVERT' WHERE ModifierId='TRAIT_GREAT_WORK_GOLD_RELIC';
INSERT INTO Modifiers(ModifierId, ModifierType, RunOnce, Permanent, OwnerRequirementSetId) VALUES
    ('BBG_KONGO_RELIC_GOVBUILDING_TALL', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_TALL_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_WIDE', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_WIDE_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CONQUEST', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_CONQUEST_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_FAITH', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_FAITH_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CITYSTATES', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_CITYSTATES_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_SPIES', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_SPIES_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_SCIENCE', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_SCIENCE_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CULTURE', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_CULTURE_REQUIREMENTS'),
    ('BBG_KONGO_RELIC_GOVBUILDING_MILITARY', 'MODIFIER_PLAYER_GRANT_RELIC', 1, 1, 'PLAYER_HAS_GOV_BUILDING_MILITARY_REQUIREMENTS');
INSERT INTO ModifierArguments(ModifierId, Name, Value) VALUES
    ('BBG_KONGO_RELIC_GOVBUILDING_TALL', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_WIDE', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CONQUEST', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_FAITH', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CITYSTATES', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_SPIES', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_SCIENCE', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_CULTURE', 'Amount', '1'),
    ('BBG_KONGO_RELIC_GOVBUILDING_MILITARY', 'Amount', '1');
INSERT INTO TraitModifiers(TraitType, ModifierId) VALUES
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_TALL'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_WIDE'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_CONQUEST'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_FAITH'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_CITYSTATES'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_SPIES'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_SCIENCE'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_CULTURE'),
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_KONGO_RELIC_GOVBUILDING_MILITARY');

-- NGao 3PM
-- 16/04/23 Revert
-- UPDATE Units SET BaseMoves=3 WHERE UnitType='UNIT_KONGO_SHIELD_BEARER';

-- Put back writer point.
INSERT INTO TraitModifiers(TraitType, ModifierId) VALUES
    ('TRAIT_CIVILIZATION_NKISI', 'TRAIT_DOUBLE_WRITER_POINTS');

-- +4 faith for each sculture and artifact
UPDATE ModifierArguments SET Value=2 WHERE Name='YieldChange' AND ModifierId IN ('TRAIT_GREAT_WORK_FAITH_SCULPTURE', 'TRAIT_GREAT_WORK_FAITH_ARTIFACT', 'TRAIT_GREAT_WORK_FAITH_RELIC');

INSERT INTO Requirements (RequirementId, RequirementType) VALUES
    ('BBG_PLAYER_IS_MVEMBA', 'REQUIREMENT_PLAYER_LEADER_TYPE_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
    ('BBG_PLAYER_IS_MVEMBA', 'LeaderType', 'LEADER_MVEMBA');
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_PLAYER_IS_MVEMBA_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_PLAYER_IS_MVEMBA_REQSET', 'BBG_PLAYER_IS_MVEMBA');

INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_KONGO_GOLD_PER_POPULATION_CONVERTED', 'MODIFIER_ALL_CITIES_ATTACH_MODIFIER', 'CITY_FOLLOWS_RELIGION_REQUIREMENTS'),
    ('BBG_KONGO_GOLD_PER_POPULATION_CONVERTED_MODIFIER', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', 'BBG_PLAYER_IS_MVEMBA_REQSET'),
    ('BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED', 'MODIFIER_ALL_CITIES_ATTACH_MODIFIER', 'CITY_FOLLOWS_RELIGION_REQUIREMENTS'),
    ('BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED_MODIFIER', 'MODIFIER_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION', 'BBG_PLAYER_IS_MVEMBA_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_KONGO_GOLD_PER_POPULATION_CONVERTED', 'ModifierId', 'BBG_KONGO_GOLD_PER_POPULATION_CONVERTED_MODIFIER'),
    ('BBG_KONGO_GOLD_PER_POPULATION_CONVERTED_MODIFIER', 'YieldType', 'YIELD_GOLD'),
    ('BBG_KONGO_GOLD_PER_POPULATION_CONVERTED_MODIFIER', 'Amount', 1),
    ('BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED', 'ModifierId', 'BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED_MODIFIER'),
    ('BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED_MODIFIER', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED_MODIFIER', 'Amount', 0.2);

INSERT INTO BeliefModifiers (BeliefType, ModifierID)
    SELECT BeliefType, 'BBG_KONGO_GOLD_PER_POPULATION_CONVERTED' FROM Beliefs WHERE BeliefClassType='BELIEF_CLASS_FOLLOWER' UNION
    SELECT BeliefType, 'BBG_KONGO_CULTURE_PER_POPULATION_CONVERTED' FROM Beliefs WHERE BeliefClassType='BELIEF_CLASS_FOLLOWER';

-- 05/04/25 +100% prod towards archealogists
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
    ('BBG_TRAIT_ARCHAEOLOGIST_PROD', 'MODIFIER_PLAYER_UNITS_ADJUST_UNIT_PRODUCTION');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_TRAIT_ARCHAEOLOGIST_PROD', 'UnitType', 'UNIT_ARCHAEOLOGIST'),
    ('BBG_TRAIT_ARCHAEOLOGIST_PROD', 'Amount', '100');
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_CIVILIZATION_NKISI', 'BBG_TRAIT_ARCHAEOLOGIST_PROD');


-- 19/12/25 merchant point moved to Mbande
DELETE FROM TraitModifiers WHERE ModifierId='TRAIT_DOUBLE_MERCHANT_POINTS' AND TraitType='TRAIT_CIVILIZATION_NKISI';

-- 19/12/25 Mvemba gets +50% general points
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
    ('BBG_MVEMBA_GENERAL_POINTS', 'MODIFIER_PLAYER_ADJUST_GREAT_PERSON_POINTS_PERCENT');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MVEMBA_GENERAL_POINTS', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_GENERAL'),
    ('BBG_MVEMBA_GENERAL_POINTS', 'Amount', 50);
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MVEMBA_GENERAL_POINTS');

-- 19/12/25 Forest/rainforest give +1 prod when adjacent to an encampment
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_REQSET', 'REQUIREMENTSET_TEST_ALL'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_REQSET', 'PLOT_IS_FOREST_REQUIREMENT'),
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_REQSET', 'BBG_PLOT_IS_ADJACENT_ENCAMPMENT'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_REQSET', 'PLOT_IS_JUNGLE_REQUIREMENT'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_REQSET', 'BBG_PLOT_IS_ADJACENT_ENCAMPMENT');
INSERT INTO Requirements (RequirementId, RequirementType) VALUES
    ('BBG_PLOT_IS_ADJACENT_ENCAMPMENT', 'REQUIREMENT_PLOT_ADJACENT_DISTRICT_TYPE_MATCHES');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
    ('BBG_PLOT_IS_ADJACENT_ENCAMPMENT', 'DistrictType', 'DISTRICT_ENCAMPMENT');

INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MVEMBA_PROD_FOREST_ADJACENT_ENCAMPMENT', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_REQSET'),
    ('BBG_MVEMBA_PROD_JUNGLE_ADJACENT_ENCAMPMENT', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MVEMBA_PROD_FOREST_ADJACENT_ENCAMPMENT', 'YieldType', 'YIELD_PRODUCTION'),
    ('BBG_MVEMBA_PROD_FOREST_ADJACENT_ENCAMPMENT', 'Amount', 1),
    ('BBG_MVEMBA_PROD_JUNGLE_ADJACENT_ENCAMPMENT', 'YieldType', 'YIELD_PRODUCTION'),
    ('BBG_MVEMBA_PROD_JUNGLE_ADJACENT_ENCAMPMENT', 'Amount', 1);
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MVEMBA_PROD_FOREST_ADJACENT_ENCAMPMENT'),
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MVEMBA_PROD_JUNGLE_ADJACENT_ENCAMPMENT');

-- 02/01/26 Forest/rainforest give +1 prod when adjacent to an encampment and the city has a MBanza
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_CITY_HAS_MBANZA_REQSET', 'REQUIREMENTSET_TEST_ALL'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_HAS_MBANZA_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_CITY_HAS_MBANZA_REQSET', 'PLOT_IS_FOREST_REQUIREMENT'),
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_CITY_HAS_MBANZA_REQSET', 'BBG_PLOT_IS_ADJACENT_ENCAMPMENT'),
    ('BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_CITY_HAS_MBANZA_REQSET', 'BBG_CITY_HAS_DISTRICT_MBANZA_REQUIREMENT'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_HAS_MBANZA_REQSET', 'PLOT_IS_JUNGLE_REQUIREMENT'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_HAS_MBANZA_REQSET', 'BBG_PLOT_IS_ADJACENT_ENCAMPMENT'),
    ('BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_HAS_MBANZA_REQSET', 'BBG_CITY_HAS_DISTRICT_MBANZA_REQUIREMENT');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MVEMBA_FOOD_FOREST_ADJACENT_ENCAMPMENT_MBANZA', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_FOREST_ADJACENT_ENCAMPMENT_CITY_HAS_MBANZA_REQSET'),
    ('BBG_MVEMBA_FOOD_JUNGLE_ADJACENT_ENCAMPMENT_MBANZA', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_JUNGLE_ADJACENT_ENCAMPMENT_HAS_MBANZA_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MVEMBA_FOOD_FOREST_ADJACENT_ENCAMPMENT_MBANZA', 'YieldType', 'YIELD_FOOD'),
    ('BBG_MVEMBA_FOOD_FOREST_ADJACENT_ENCAMPMENT_MBANZA', 'Amount', 1),
    ('BBG_MVEMBA_FOOD_JUNGLE_ADJACENT_ENCAMPMENT_MBANZA', 'YieldType', 'YIELD_FOOD'),
    ('BBG_MVEMBA_FOOD_JUNGLE_ADJACENT_ENCAMPMENT_MBANZA', 'Amount', 1);
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MVEMBA_FOOD_FOREST_ADJACENT_ENCAMPMENT_MBANZA'),
    ('TRAIT_LEADER_RELIGIOUS_CONVERT', 'BBG_MVEMBA_FOOD_JUNGLE_ADJACENT_ENCAMPMENT_MBANZA');