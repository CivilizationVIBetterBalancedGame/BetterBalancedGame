
-- 03/07/24 Trader and Spy get +2 sight, recon units get +1 when Machinery is unlocked
-- 07/07/25 Removed
-- INSERT INTO Types(Type, Kind) VALUES
--     ('BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY', 'KIND_ABILITY'),
--     ('BBG_WUZETIAN_RECON_SIGHT_ABILITY', 'KIND_ABILITY');

-- INSERT INTO TypeTags(Type, Tag) VALUES
--     ('BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY', 'CLASS_SPY'),
--     ('BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY', 'CLASS_TRADER'),
--     ('BBG_WUZETIAN_RECON_SIGHT_ABILITY', 'CLASS_RECON');

-- INSERT INTO Modifiers (ModifierId, ModifierType, OwnerRequirementSetId) VALUES
-- 	('BBG_WUZETIAN_TRADER_SPY_SIGHT_MODIFIER', 'MODIFIER_PLAYER_UNIT_ADJUST_SIGHT', NULL),
-- 	('BBG_WUZETIAN_TRADER_SPY_SIGHT_GIVER', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', NULL),
-- 	('BBG_WUZETIAN_RECON_SIGHT_MODIFIER', 'MODIFIER_PLAYER_UNIT_ADJUST_SIGHT', NULL),
-- 	('BBG_WUZETIAN_RECON_SIGHT_GIVER', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 'BBG_UTILS_PLAYER_HAS_TECH_MACHINERY');

-- INSERT INTO UnitAbilities(UnitAbilityType, Name, Description, Inactive) VALUES
--     ('BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY', 'LOC_BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY_NAME', 'LOC_BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY_DESC', 1),
--     ('BBG_WUZETIAN_RECON_SIGHT_ABILITY', 'LOC_BBG_WUZETIAN_RECON_SIGHT_ABILITY_NAME', 'LOC_BBG_WUZETIAN_RECON_SIGHT_ABILITY_DESC', 1);

-- INSERT INTO UnitAbilityModifiers(UnitAbilityType, ModifierId) VALUES
--     ('BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY', 'BBG_WUZETIAN_TRADER_SPY_SIGHT_MODIFIER'),
--     ('BBG_WUZETIAN_RECON_SIGHT_ABILITY', 'BBG_WUZETIAN_RECON_SIGHT_MODIFIER');

-- INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
-- 	('BBG_WUZETIAN_TRADER_SPY_SIGHT_GIVER', 'AbilityType', 'BBG_WUZETIAN_TRADER_SPY_SIGHT_ABILITY'),
-- 	('BBG_WUZETIAN_TRADER_SPY_SIGHT_MODIFIER', 'Amount', 2),
-- 	('BBG_WUZETIAN_RECON_SIGHT_GIVER', 'AbilityType', 'BBG_WUZETIAN_RECON_SIGHT_ABILITY'),
-- 	('BBG_WUZETIAN_RECON_SIGHT_MODIFIER', 'Amount', 1);

-- INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
-- 	('TRAIT_LEADER_WU_ZETIAN', 'BBG_WUZETIAN_TRADER_SPY_SIGHT_GIVER'),
-- 	('TRAIT_LEADER_WU_ZETIAN', 'BBG_WUZETIAN_RECON_SIGHT_GIVER');

-- 03/07/24 Units 3 tiles from a recon unit or spy gets +2
-- 23/07 removed spy and increased cs from recon to +3
INSERT INTO Types (Type, Kind) VALUES
    -- ('BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_ABILITY', 'KIND_ABILITY'),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY', 'KIND_ABILITY'),
    ('BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY', 'KIND_ABILITY'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'KIND_ABILITY');
INSERT INTO TypeTags (Type, Tag) VALUES
    -- ('BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_ABILITY', 'CLASS_SPY'),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY', 'CLASS_ALL_COMBAT_UNITS'),
    ('BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY', 'CLASS_RECON'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_RANGED'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_MELEE'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_HEAVY_CAVALRY'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_LIGHT_CAVALRY'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_SIEGE'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'CLASS_RECON');
INSERT INTO UnitAbilities (UnitAbilityType, Name, Description, Inactive) VALUES
    -- ('BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_ABILITY', 'LOC_BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_NAME', 'LOC_BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_DESC', 0),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY', 'LOC_BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY_NAME', 'LOC_BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY_DESC', 1),
    ('BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY', 'LOC_BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY_NAME', 'LOC_BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY_DESC', 0),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'LOC_BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY_NAME', 'LOC_BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY_DESC', 1);
INSERT INTO UnitAbilityModifiers (UnitAbilityType, ModifierId) VALUES
    -- ('BBG_WUZETIAN_SPY_GRANT_COMBATSTRENGTH_ABILITY', 'BBG_WUZETIAN_COMBAT_FROM_SPY_GIVER'),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY', 'BBG_WUZETIAN_COMBAT_FROM_SPY_MODIFIER'),
    ('BBG_WUZETIAN_RECON_GRANT_COMBATSTRENGTH_ABILITY', 'BBG_WUZETIAN_COMBAT_FROM_RECON_GIVER'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY', 'BBG_WUZETIAN_COMBAT_FROM_RECON_MODIFIER');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_GIVER', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 'BBG_WU_ZETIAN_UNIT_IS_3_TILES_AWAY_REQSET'),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_MODIFIER', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', NULL),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_GIVER', 'MODIFIER_PLAYER_UNITS_GRANT_ABILITY', 'BBG_WU_ZETIAN_UNIT_IS_3_TILES_AWAY_REQSET'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_MODIFIER', 'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH', NULL);
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_GIVER', 'AbilityType', 'BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY'),
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_MODIFIER', 'Amount', 2),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_GIVER', 'AbilityType', 'BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_MODIFIER', 'Amount', 3);

INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
	-- ('TRAIT_LEADER_WU_ZETIAN', 'BBG_WUZETIAN_COMBAT_FROM_SPY_GIVER'),
	('TRAIT_LEADER_WU_ZETIAN', 'BBG_WUZETIAN_COMBAT_FROM_RECON_GIVER');

INSERT INTO Requirements (RequirementId, RequirementType) VALUES
    ('BBG_PLAYER_IS_WUZETIAN_REQUIREMENT' , 'REQUIREMENT_PLAYER_LEADER_TYPE_MATCHES'),
	('BBG_REQUIRES_UNIT_IS_3_TILES_AWAY', 'REQUIREMENT_PLOT_ADJACENT_TO_OWNER');
INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES
    ('BBG_PLAYER_IS_WUZETIAN_REQUIREMENT' , 'LeaderType', 'LEADER_WU_ZETIAN'),
	('BBG_REQUIRES_UNIT_IS_3_TILES_AWAY', 'MinDistance', '0'),
	('BBG_REQUIRES_UNIT_IS_3_TILES_AWAY', 'MaxDistance', '3');
INSERT INTO RequirementSets(RequirementSetId, RequirementSetType) VALUES
	('BBG_WU_ZETIAN_UNIT_IS_3_TILES_AWAY_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
	('BBG_WU_ZETIAN_UNIT_IS_3_TILES_AWAY_REQSET', 'BBG_REQUIRES_UNIT_IS_3_TILES_AWAY'),
	('BBG_WU_ZETIAN_UNIT_IS_3_TILES_AWAY_REQSET', 'BBG_PLAYER_IS_WUZETIAN_REQUIREMENT');

INSERT INTO ModifierStrings (ModifierId, Context, Text) VALUES
    -- ('BBG_WUZETIAN_COMBAT_FROM_SPY_MODIFIER', 'Preview', 'LOC_BBG_WUZETIAN_COMBAT_FROM_SPY_ABILITY_PREVIEW'),
    ('BBG_WUZETIAN_COMBAT_FROM_RECON_MODIFIER', 'Preview', 'LOC_BBG_WUZETIAN_COMBAT_FROM_RECON_ABILITY_PREVIEW');



-- 13/04/25 Spy delayed to Civil
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_PLAYER_HAS_CIVIL_AND_CAPITAL', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_PLAYER_HAS_CIVIL_AND_CAPITAL', 'REQUIRES_CAPITAL_CITY'),
    ('BBG_PLAYER_HAS_CIVIL_AND_CAPITAL', 'BBG_UTILS_PLAYER_HAS_CIVIC_CIVIL_SERVICE_REQUIREMENT');
UPDATE Modifiers SET SubjectRequirementSetId='BBG_PLAYER_HAS_CIVIL_AND_CAPITAL' WHERE ModifierId='WU_ZETIAN_FREE_SPY_CAPACITY';
UPDATE Modifiers SET OwnerRequirementSetId='BBG_PLAYER_HAS_CIVIL_AND_CAPITAL' WHERE ModifierId='WU_ZETIAN_FREE_SPY';



-- 30/06/25 China leaders get different wall buffs
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_WU_WALL_SCIENCE_ADJACENT', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_WALL_NEXT_TO_WALL_REQSET'),
    ('BBG_WU_WALL_SCIENCE', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_PLOT_IS_WALL_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_WU_WALL_SCIENCE_ADJACENT', 'YieldType', 'YIELD_SCIENCE'),
    ('BBG_WU_WALL_SCIENCE_ADJACENT', 'Amount', 1),
    ('BBG_WU_WALL_SCIENCE', 'YieldType', 'YIELD_SCIENCE'),
    ('BBG_WU_WALL_SCIENCE', 'Amount', 1);
INSERT INTO TraitModifiers VALUES
    ('TRAIT_LEADER_WU_ZETIAN', 'BBG_WU_WALL_SCIENCE_ADJACENT');