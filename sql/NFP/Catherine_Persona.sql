------------------------------------------------------------------------------
-- FILE: new_bbg_catherine_magnificient.sql
-- AUTHOR: iElden, D. / Jack The Narrator
-- PURPOSE: Database leader related modifications by new BBG
------------------------------------------------------------------------------
--==============================================================================================
--******  CATHERINE THE MAGNIFICIENT(LY OPed)  ******
--==============================================================================================

-- Project need medieval faires
UPDATE Modifiers SET SubjectRequirementSetId='BBG_UTILS_PLAYER_HAS_CIVIC_MEDIEVAL_FAIRES_REQSET' WHERE ModifierType='MODIFIER_PLAYER_ALLOW_PROJECT_CATHERINE';
-- Project no longer give flat tourism : give 3% tourism stackable instead
DELETE FROM ProjectCompletionModifiers WHERE ModifierId='PROJECT_COMPLETION_GRANT_TOURISM_BASED_ON_EXCESS_LUXURIES';
INSERT INTO Modifiers (ModifierId, ModifierType) VALUES
    ('BBG_MAGNIFICENCE_PROJECT_TOURISM', 'MODIFIER_PLAYER_ADJUST_TOURISM');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_PROJECT_TOURISM', 'Amount', 3);
INSERT INTO ProjectCompletionModifiers (ProjectType, ModifierId) VALUES
    ('PROJECT_COURT_FESTIVAL', 'BBG_MAGNIFICENCE_PROJECT_TOURISM');



-- Culture for every improvement on resource
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_STRAT_CRAFTSMANSHIP_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_STRAT_CRAFTSMANSHIP_REQSET', 'REQUIRES_PLOT_HAS_IMPROVED_STRATEGIC'),
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_STRAT_CRAFTSMANSHIP_REQSET', 'BBG_UTILS_PLAYER_HAS_CIVIC_CRAFTSMANSHIP_REQUIREMENT');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_TILE_HAS_ANY_IMPROVEMENT_ON_STRAT_CRAFTSMANSHIP_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT', 'Amount', 1);

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_LUX_CRAFTSMANSHIP_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_LUX_CRAFTSMANSHIP_REQSET', 'BBG_REQUIRES_PLOT_HAS_IMPROVED_LUXURY'),
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_LUX_CRAFTSMANSHIP_REQSET', 'BBG_UTILS_PLAYER_HAS_CIVIC_CRAFTSMANSHIP_REQUIREMENT');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_TILE_HAS_ANY_IMPROVEMENT_ON_LUX_CRAFTSMANSHIP_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX', 'Amount', 1);

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_BONUS_CRAFTSMANSHIP_REQSET', 'REQUIREMENTSET_TEST_ALL');
INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_BONUS_CRAFTSMANSHIP_REQSET', 'BBG_REQUIRES_PLOT_HAS_IMPROVED_BONUS'),
    ('BBG_TILE_HAS_ANY_IMPROVEMENT_ON_BONUS_CRAFTSMANSHIP_REQSET', 'BBG_UTILS_PLAYER_HAS_CIVIC_CRAFTSMANSHIP_REQUIREMENT');
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_TILE_HAS_ANY_IMPROVEMENT_ON_BONUS_CRAFTSMANSHIP_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS', 'Amount', 1);


-- Culture for every improvement on strat resource next to theater
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_STRAT_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIREMENTSET_TEST_ALL'); 
INSERT INTO RequirementSetRequirements (RequirementSetId , RequirementId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_STRAT_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIRES_PLOT_HAS_IMPROVED_STRATEGIC'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_STRAT_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIRES_PLOT_ADJACENT_THEATER_SQUARE'); 
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT_IMPROVEMENT_NEXT_TO_THEATER', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_STRAT_RESOURCE_NEXT_TO_THEATER_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT_IMPROVEMENT_NEXT_TO_THEATER', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_STRAT_IMPROVEMENT_NEXT_TO_THEATER', 'Amount', 1);
-- Culture for every improvement on lux resource next to theater
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_LUX_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIREMENTSET_TEST_ALL'); 
INSERT INTO RequirementSetRequirements (RequirementSetId , RequirementId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_LUX_RESOURCE_NEXT_TO_THEATER_REQSET', 'BBG_REQUIRES_PLOT_HAS_IMPROVED_LUXURY'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_LUX_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIRES_PLOT_ADJACENT_THEATER_SQUARE'); 
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX_IMPROVEMENT_NEXT_TO_THEATER', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_LUX_RESOURCE_NEXT_TO_THEATER_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX_IMPROVEMENT_NEXT_TO_THEATER', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_LUX_IMPROVEMENT_NEXT_TO_THEATER', 'Amount', 1);
-- Culture for every improvement on bonus resource next to theater
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_BONUS_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIREMENTSET_TEST_ALL'); 
INSERT INTO RequirementSetRequirements (RequirementSetId , RequirementId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_BONUS_RESOURCE_NEXT_TO_THEATER_REQSET', 'BBG_REQUIRES_PLOT_HAS_IMPROVED_BONUS'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_BONUS_RESOURCE_NEXT_TO_THEATER_REQSET', 'REQUIRES_PLOT_ADJACENT_THEATER_SQUARE'); 
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS_IMPROVEMENT_NEXT_TO_THEATER', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 'BBG_MAGNIFICENCE_CULTURE_ON_IMPROVED_BONUS_RESOURCE_NEXT_TO_THEATER_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS_IMPROVEMENT_NEXT_TO_THEATER', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENCE_CULTURE_ON_BONUS_IMPROVEMENT_NEXT_TO_THEATER', 'Amount', 1);

INSERT INTO TraitModifiers(TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_STRAT'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_LUX'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_BONUS'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_STRAT_IMPROVEMENT_NEXT_TO_THEATER'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_BONUS_IMPROVEMENT_NEXT_TO_THEATER'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENCE_CULTURE_ON_LUX_IMPROVEMENT_NEXT_TO_THEATER');
DELETE FROM TraitModifiers WHERE ModifierId='MAGNIFICENCES_CULTURE_LUXURY_ADJACENT_TO_THEATER_SQUARE_OR_CHATEAU';

-- 30/06/25 Catherine the Magnificient : No longer gets 1 culture on resources next to chateau
-- Luxury next to chateau grant 1 amenity
INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES
    ('BBG_MAGNIFICENCE_IMPROVED_LUX_NEXT_TO_CHATEAU_REQSET', 'REQUIREMENTSET_TEST_ALL'); 
INSERT INTO RequirementSetRequirements (RequirementSetId , RequirementId) VALUES
    ('BBG_MAGNIFICENCE_IMPROVED_LUX_NEXT_TO_CHATEAU_REQSET', 'BBG_REQUIRES_PLOT_HAS_IMPROVED_LUXURY'),
    ('BBG_MAGNIFICENCE_IMPROVED_LUX_NEXT_TO_CHATEAU_REQSET', 'REQUIRES_PLOT_ADJACENT_CHATEAU'); 

INSERT INTO Modifiers (ModifierId, ModifierType, OwnerRequirementSetId, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU', 'MODIFIER_SINGLE_CITY_ADJUST_IMPROVEMENT_AMENITY', 'BBG_PLAYER_IS_LEADER_CATHERINE_DE_MEDICI_ALT_REQSET', 'BBG_MAGNIFICENCE_IMPROVED_LUX_NEXT_TO_CHATEAU_REQSET');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU', 'Amount', 1);
INSERT INTO ImprovementModifiers (ImprovementType, ModifierID) VALUES
    ('IMPROVEMENT_MINE', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU'),
    ('IMPROVEMENT_QUARRY', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU'),
    ('IMPROVEMENT_PASTURE', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU'),
    ('IMPROVEMENT_PLANTATION', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU'),
    ('IMPROVEMENT_CAMP', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU'),
    ('IMPROVEMENT_FISHING_BOATS', 'BBG_MAGNIFICENT_AMENITY_LUX_NEXT_TO_CHATEAU');


-- 30/06/25 Happy cities gain +5% Culture, and generate +1 Great Writer, Artist, and Musician point in their Theater. Ecstatic cities double these bonuses.
-- 28/07/25 Happy cities gain +5% Culture, and generate +1 Great Writer with theater, Ecstatic +10% culture and generate +1 Artist with theater
INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId) VALUES
    ('BBG_MAGNIFICENT_CULTURE_HAPPY', 'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_YIELD', NULL),
    ('BBG_MAGNIFICENT_CULTURE_ECSTATIC', 'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_YIELD', NULL),
    ('BBG_MAGNIFICENT_WRITER_POINT_HAPPY', 'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_GREAT_PERSON', 'BBG_CITY_HAS_DISTRICT_THEATER'),
    ('BBG_MAGNIFICENT_WRITER_POINT_ECSTATIC', 'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_GREAT_PERSON', 'BBG_CITY_HAS_DISTRICT_THEATER'),
    ('BBG_MAGNIFICENT_ARTIST_POINT_ECSTATIC', 'MODIFIER_PLAYER_CITIES_ADJUST_HAPPINESS_GREAT_PERSON', 'BBG_CITY_HAS_DISTRICT_THEATER');
INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES
    ('BBG_MAGNIFICENT_CULTURE_HAPPY', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENT_CULTURE_HAPPY', 'HappinessType', 'HAPPINESS_HAPPY'),
    ('BBG_MAGNIFICENT_CULTURE_HAPPY', 'Amount', 5),
    ('BBG_MAGNIFICENT_CULTURE_ECSTATIC', 'YieldType', 'YIELD_CULTURE'),
    ('BBG_MAGNIFICENT_CULTURE_ECSTATIC', 'HappinessType', 'HAPPINESS_ECSTATIC'),
    ('BBG_MAGNIFICENT_CULTURE_ECSTATIC', 'Amount', 10),
    ('BBG_MAGNIFICENT_WRITER_POINT_HAPPY', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_WRITER'),
    ('BBG_MAGNIFICENT_ARTIST_POINT_ECSTATIC', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_ARTIST'),
    ('BBG_MAGNIFICENT_WRITER_POINT_HAPPY', 'HappinessType', 'HAPPINESS_HAPPY'),
    ('BBG_MAGNIFICENT_ARTIST_POINT_ECSTATIC', 'HappinessType', 'HAPPINESS_ECSTATIC'),
    ('BBG_MAGNIFICENT_WRITER_POINT_HAPPY', 'Amount', 1),
    ('BBG_MAGNIFICENT_ARTIST_POINT_ECSTATIC', 'Amount', 1),
    ('BBG_MAGNIFICENT_WRITER_POINT_ECSTATIC', 'GreatPersonClassType', 'GREAT_PERSON_CLASS_WRITER'),
    ('BBG_MAGNIFICENT_WRITER_POINT_ECSTATIC', 'HappinessType', 'HAPPINESS_ECSTATIC'),
    ('BBG_MAGNIFICENT_WRITER_POINT_ECSTATIC', 'Amount', 1);
INSERT INTO TraitModifiers (TraitType, ModifierId) VALUES
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENT_CULTURE_HAPPY'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENT_CULTURE_ECSTATIC'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENT_WRITER_POINT_HAPPY'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENT_WRITER_POINT_ECSTATIC'),
    ('TRAIT_LEADER_MAGNIFICENCES', 'BBG_MAGNIFICENT_ARTIST_POINT_ECSTATIC');

